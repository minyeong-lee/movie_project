<?xml version="1.0" encoding="UTF-8"?>
<queries>
    <!-- Cinema_Infos 테이블: cinema_info_id로 조회 -->
    <query id="getCinemaInfoById">
        <![CDATA[
        SELECT cinema_info_id, schedule_id, seat_id FROM Cinema_Infos WHERE cinema_info_id = ?
    ]]>
    </query>

    <!-- Cinema_Infos 테이블: 새로운 레코드 삽입 -->
    <query id="insertCinemaInfo">
        <![CDATA[
            INSERT INTO Cinema_Infos (schedule_id, seat_id) VALUES (?, ?)
        ]]>
    </query>

    <!-- Movies 테이블: 전체 영화 목록 조회 -->
    <query id="getAllMovies">
        <![CDATA[
        SELECT movie_id, movie_title, movie_price FROM Movies
    ]]>
    </query>

    <!-- Movies 테이블: 영화 번호로 영화 정보 조회 -->
    <query id="getMovieById">
        <![CDATA[
        SELECT movie_id, movie_title, movie_price FROM Movies WHERE movie_id = ?
    ]]>
    </query>

    <!-- Payments 테이블: 결제 정보 삽입 -->
    <query id="insertPayment">
        <![CDATA[
        INSERT INTO Payments (payment_method, payment_price) VALUES (?, ?)
    ]]>
    </query>

    <!-- Schedules 테이블: 영화 ID에 해당하는 상영시간 조회 -->
    <query id="getSchedulesByMovieId">
        <![CDATA[
        SELECT schedule_id, schedule_start_time, movie_id FROM Schedules WHERE movie_id = ?
    ]]>
    </query>

    <!-- Seats 테이블: 전체 좌석 조회 -->
    <query id="getAllSeats">
        <![CDATA[
        SELECT seat_id, seat_number FROM Seats
    ]]>
    </query>

    <!-- Seats 테이블: 특정 상영시간의 사용 불가능한 좌석 조회 -->
    <query id="getUnavailSeatsByScheduleId">
        <![CDATA[
        SELECT s.seat_id, s.seat_number
        FROM Seats s
        JOIN Cinema_Infos ci ON s.seat_id = ci.seat_id
        WHERE ci.schedule_id = ?
    ]]>
    </query>

    <!-- Tickets 테이블: 회원 ID로 티켓 정보(예매 내역) 조회 -->
    <query id="getTicketInfoByUser">
        <![CDATA[
        SELECT T.ticket_id, M.movie_title, S.schedule_start_time
        FROM Tickets T
        JOIN cinema_infos ci ON ci.cinema_info_id = T.cinema_info_id
        JOIN Users U ON T.user_id = U.user_id
        JOIN Schedules S ON S.schedule_id = ci.schedule_id
        JOIN Movies M ON M.movie_id = S.movie_id
        WHERE U.user_id = ?
    ]]>
    </query>

    <!-- Tickets 테이블: 티켓 번호로 티켓 정보 조회 -->
    <query id="getTicketById">
        <![CDATA[
        SELECT ticket_id, cancel_status, cinema_info_id, user_id FROM Tickets WHERE ticket_id = ?
    ]]>
    </query>

    <!-- Tickets 테이블: 티켓 정보 삽입 -->
    <query id="insertTicket">
        <![CDATA[
        INSERT INTO Tickets (cancel_status, cinema_info_id, user_id, payment_id) VALUES (?, ?, ?, ?)
    ]]>
    </query>

    <!-- Users 테이블: 회원 정보 삽입 (회원가입) -->
    <query id="insertUser">
        <![CDATA[
        INSERT INTO Users (user_nickname, user_password, user_status) VALUES (?, ?, ?)
    ]]>
    </query>

    <!-- Users 테이블: 회원 로그인 (닉네임, 비밀번호로 회원 조회) -->
    <query id="loginUser">
        <![CDATA[
        SELECT * FROM Users WHERE user_nickname = ? AND user_password = ?
    ]]>
    </query>


</queries>